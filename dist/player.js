!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).Gotipath=e.Gotipath||{},e.Gotipath.Player=t())}(this,(function(){"use strict";const e="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);const t=void 0!==Array.prototype.indexOf,n="undefined"!=typeof window&&void 0!==window.postMessage;if(!(e||t&&n))throw new Error("Sorry, the Gotipath Player API is not available in this browser.");function o(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.warn(e),{}}return e}function i(e,t,n){if(!e.element.contentWindow||!e.element.contentWindow.postMessage)return;let o={method:t};void 0!==n&&(o.data=n);var i=JSON.stringify(o);e.element.contentWindow.postMessage(i,"https://player.gotipath.com")}return class{constructor(e,t={}){if(this.element=e,this.options=t,"IFRAME"===e.nodeName&&(e.getAttribute("src"),0))throw new Error("The player element passed isnâ€™t a Gotipath embed.");return this._window=e.ownerDocument.defaultView,this.element=e,this.origin="*",new Promise(((e,t)=>{this._onMessage=n=>{if(n.origin,this.element.contentWindow!==n.source)return;"*"===this.origin&&(this.origin=n.origin);const i=o(n.data);if(i&&"error"===i.event&&i.data&&"ready"===i.data.method){const e=new Error(i.data.message);return e.name=i.data.name,void t(e)}i&&"ready"===i.event&&e(),function(e,t){(t=o(t))&&t.event}(0,i)},this._window.addEventListener("message",this._onMessage)})),this}on(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");this.callMethod("addEventListener",e)}setCurrentTime(e){i(this,"setCurrentTime",{currentTime:e})}play(){i(this,"play")}pause(){i(this,"pause")}mute(){i(this,"mute")}unmute(){i(this,"unmute")}setVolume(e){i(this,"setVolume",{volume:e})}callMethod(e,t={}){console.log("callMethod",e,t)}get(e){console.log("get",e)}set(e,t){}}}));
