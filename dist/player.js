!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).Gotipath=e.Gotipath||{},e.Gotipath.Player=t())}(this,(function(){"use strict";const e="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);function t(e){return"http://localhost:8080"===e}const n=void 0!==Array.prototype.indexOf,o="undefined"!=typeof window&&void 0!==window.postMessage;if(!(e||n&&o))throw new Error("Sorry, the Gotipath Player API is not available in this browser.");const i=new WeakMap;function s(e,t){return(i.get(e.element)||{})[t]||[]}function r(e,t,n){if(!e.element.contentWindow||!e.element.contentWindow.postMessage)return;let o={method:t};void 0!==n&&(o.data=n);var i=JSON.stringify(o);console.log("data",i),e.element.contentWindow.postMessage(i,e.origin)}return class{constructor(e,n={}){if(this.element=e,this.options=n,"IFRAME"===e.nodeName&&!t(e.getAttribute("src")||""))throw new Error("The player element passed isnâ€™t a Gotipath embed.");return this.element=e,this.origin="*",this._onMessage=e=>{if(!t(e.origin)||this.element.contentWindow!==e.source)return;"*"===this.origin&&(this.origin=e.origin);const n=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.warn(e),{}}return e}(e.data);n&&n.event&&function(e,t){var n=s(e,`event:${t.event}`);0!==n.length&&n.forEach((e=>{"function"==typeof e&&(t.data?e(t.data):e())}))}(this,n)},window.addEventListener("message",this._onMessage),this}on(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0==s(this,`event:${e}`).length&&function(e,t,n){const o=i.get(e.element)||{};t in o||(o[t]=[]),o[t].push(n),i.set(e.element,o)}(this,`event:${e}`,t)}play(){r(this,"play")}pause(){r(this,"pause")}setCurrentTime(e){r(this,"setCurrentTime",{currentTime:e})}mute(){r(this,"mute")}unmute(){r(this,"unmute")}}}));
